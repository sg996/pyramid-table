var S=Object.defineProperty,T=Object.defineProperties;var R=Object.getOwnPropertyDescriptors;var b=Object.getOwnPropertySymbols;var j=Object.prototype.hasOwnProperty,G=Object.prototype.propertyIsEnumerable;var f=(o,e,t)=>e in o?S(o,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):o[e]=t,m=(o,e)=>{for(var t in e||(e={}))j.call(e,t)&&f(o,t,e[t]);if(b)for(var t of b(e))G.call(e,t)&&f(o,t,e[t]);return o},g=(o,e)=>T(o,R(e));var d=(o,e,t)=>(f(o,typeof e!="symbol"?e+"":e,t),t);import{F as k,C as v,r as N,j as n,L as E,a as y,S as B,I as $,B as D,R as x,b as C,T as M,c as _,d as L,e as F,f as q,g as P}from"./vendor.5c90e435.js";const Y=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))l(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const u of r.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&l(u)}).observe(document,{childList:!0,subtree:!0});function t(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerpolicy&&(r.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?r.credentials="include":s.crossorigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function l(s){if(s.ep)return;s.ep=!0;const r=t(s);fetch(s.href,r)}};Y();const{Content:H}=E,p=k.Item,K=v.Group,I=3,U={labelCol:{span:4},wrapperCol:{span:20}},O={labelCol:{span:8},wrapperCol:{span:16}};let A=0;class z extends N.exports.Component{constructor(e){super(e);d(this,"getItem",(e,t,l)=>{const s={};return new Array(~~(t/l)).fill(e).flat(1/0).forEach((u,a)=>{s[`key${a}`]=u}),s});d(this,"getIndex",(e=0,t=0)=>new Array(e).fill().map((l,s)=>s+t));d(this,"checkboxChange",(e=[],t=[])=>{const l=[],s=[];let r=1,u=t.length!==0?t.filter(c=>e.includes(c.id)&&c):[];u=u.sort((c,i)=>e.indexOf(c.id)>e.indexOf(i.id)?1:-1);const a=u.reduce((c,i)=>{const h=i.values.length;return r*=h,l.push(i.id),c.push(this.getItem(i.values,r,h)),s.push(i.values),c},[]);this.setState({designAttrs:l,previewAttrs:a,skuAttrs:s})});d(this,"getColumns",e=>{const t=[],l=Object.keys(e[e.length-1]||[]);return l.forEach((s,r)=>{t.push({align:"center",dataIndex:`key${r}`,key:`key${r}`,onCell:(u,a)=>{const c={};A=l.length;const i=Object.keys(e[a]).length,h=this.getIndex(this.state.layer-1,0),w=this.getIndex(~~(A-i),i);return h.includes(a)&&(c.colSpan=w.includes(r)?0:~~(A/i)),c}})}),t});d(this,"skuCombination",e=>Array.isArray(e)?e.reduce((t,l)=>{const s=[];return t.forEach(r=>{l.forEach(u=>{s.push(r.concat(u))})}),s},[[]]):[]);d(this,"setLayer",(e,t=!1)=>{t?this.setState({layer:e,designAttrs:[],previewAttrs:[],skuAttrs:[]}):this.setState({layer:e})});this.state={layer:I,designAttrsList:[{id:1,name:"\u5916\u89C2",values:["\u91D1\u8272","\u94F6\u8272","\u77F3\u58A8\u8272"]},{id:2,name:"\u5B58\u50A8\u5BB9\u91CF",values:["128G","256G","512G","1TB"]},{id:3,name:"\u8FD0\u884C\u5185\u5B58",values:["8G","16G"]},{id:4,name:"\u673A\u578B",values:["12","13","13 Pro"]},{id:5,name:"\u670D\u52A1\u8BA1\u5212",values:["24\u671F","\u5168\u6B3E"]}],designAttrs:[],previewAttrs:[],skuAttrs:[]}}render(){const{layer:e,designAttrsList:t=[],designAttrs:l=[],previewAttrs:s=[],skuAttrs:r=[]}=this.state,u=this.skuCombination(r);return console.log(s,r),n(E,{className:"site-layout-background",style:{padding:"25px",minHeight:"100vh"},children:n(H,{children:y(k,g(m({},U),{children:[n(p,{label:"\u7EC4\u5408\u9879\u4E2A\u6570",children:y(B,{children:[n($,{min:s.length,max:t.length,value:e,onChange:this.setLayer}),n(D,{type:"primary",onClick:()=>{this.setLayer(I,!0)},children:" Reset "})]})}),n(p,{label:"\u8BBE\u8BA1\u5C5E\u6027",className:"design-attributes",children:n(K,{style:{width:"100%"},value:l,onChange:a=>this.checkboxChange(a,t),children:n(x,{children:t.map(a=>n(C,{title:a.name,span:12,children:y(v,{value:a.id,checked:l.includes(a.id),disabled:l.length>=e&&!l.includes(a.id),children:[n("div",{className:"checked-item",children:`${a.name}\uFF08${a.values.length}\uFF09`}),l.includes(a.id)?n(M,{color:"gold",children:`\u7B2C${l.indexOf(a.id)+1}\u884C`}):null]})},a.id))})})}),n(p,{label:"\u8BBE\u8BA1\u5C5E\u6027\u7EC4\u5408\u9884\u89C8",children:n(_,{className:"pyramid-table",bordered:!0,rowKey:"key0",columns:this.getColumns(s),dataSource:s,showHeader:!1,pagination:!1,locale:{emptyText:"\u6682\u65E0\u6570\u636E"}})}),n(p,{label:"sku \u7EC4\u5408\u9884\u89C8",children:n(B,{size:[8,12],wrap:!0,children:u.length>1?u.map((a,c)=>n(L.Group,{children:a.map((i,h)=>n(L.Button,{value:i,children:i},h))},c)):"-"})}),y(x,{children:[n(C,{span:12,children:n(p,g(m({label:"\u7EC4\u5408\u6570\u636E"},O),{children:n(F,{src:s,theme:"google",iconStyle:"square",collapsed:!0,displayDataTypes:!1})}))}),n(C,{span:12,children:n(p,g(m({label:"sku \u7EC4\u5408\u6570\u636E"},O),{children:n(F,{src:u,theme:"google",iconStyle:"square",collapsed:!0,displayDataTypes:!1,enableClipboard:!0})}))})]})]}))})})}}q.render(n(P.StrictMode,{children:n(z,{})}),document.getElementById("root"));
